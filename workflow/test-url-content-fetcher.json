{
  "version": "1.0",
  "name": "URL Content Fetcher",
  "description": "Fetch webpage content and summarize it with OpenAI using custom URL input",
  "trigger": {
    "type": "chat-input",
    "config": {
      "fields": [
        {
          "id": "1",
          "label": "Website URL",
          "key": "url",
          "type": "text",
          "required": true,
          "placeholder": "https://example.com"
        }
      ]
    }
  },
  "config": {
    "steps": [
      {
        "id": "fetchPage",
        "module": "utilities.scraper.fetchHtml",
        "inputs": {
          "url": "{{trigger.url}}"
        },
        "outputAs": "htmlContent"
      },
      {
        "id": "extractText",
        "module": "utilities.scraper.extractText",
        "inputs": {
          "$": "{{htmlContent}}",
          "selector": "body"
        },
        "outputAs": "textArray"
      },
      {
        "id": "joinText",
        "module": "utilities.javascript.execute",
        "inputs": {
          "options": {
            "code": "return textArr.join(' ').substring(0, 2000);",
            "context": {
              "textArr": "{{textArray}}"
            }
          }
        },
        "outputAs": "pageText"
      },
      {
        "id": "summarize",
        "module": "ai.ai-sdk.generateText",
        "inputs": {
          "options": {
            "prompt": "Summarize the following webpage content in 3-5 sentences:\n\n{{pageText}}",
            "model": "gpt-4o-mini",
            "provider": "openai"
          }
        },
        "outputAs": "summary"
      }
    ],
    "returnValue": "{{summary.content}}",
    "outputDisplay": {
      "type": "markdown"
    }
  },
  "metadata": {
    "requiresCredentials": ["openai"]
  }
}
